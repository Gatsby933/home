<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="ä¸»é¡µ">
    <meta name="keywords" content="å¯¼èˆª,ä¸»é¡µ">
    <meta name="author" content="æ¶µã®å®‡å®™">
    <title>æ¬¢è¿æ¥åˆ°æˆ‘çš„ä¸»é¡µ</title>
    <!-- å¼•å…¥æ ·å¼ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="./images/è‰è“.svg">
    <style>
        .social-link:hover {
            background: rgba(255, 255, 255, 0.3) !important;
            transform: scale(1.05);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .card {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        /* ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½ */
        .social-link, .btn, .card {
            will-change: transform;
            backface-visibility: hidden;
            transform: translateZ(0);
            transition: all 0.2s ease;
        }
        
        /* å‡å°‘é‡ç»˜å’Œå›æµ */
        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* ä¼˜åŒ–æ»šåŠ¨æ€§èƒ½ */
        .modal-body {
            -webkit-overflow-scrolling: touch;
        }
        
        /* ç§»åŠ¨ç«¯æ»šåŠ¨ä¼˜åŒ– */
        @media (max-width: 767.98px) {
            html, body {
                scroll-behavior: smooth;
            }
            
            .container {
                overflow-y: auto;
            }
        }
        
        /* å¤åˆ¶æˆåŠŸæç¤ºåŠ¨ç”» */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        /* æ»šåŠ¨æ¡ç¾åŒ– */
        .modal-body::-webkit-scrollbar {
            width: 8px;
        }
        
        .modal-body::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        
        .modal-body::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, rgba(128, 128, 128, 0.8), rgba(64, 64, 64, 0.8));
            border-radius: 4px;
            backdrop-filter: blur(5px);
        }
        
        .modal-body::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, rgba(160, 160, 160, 0.9), rgba(80, 80, 80, 0.9));
        }
        
        /* Firefoxæ»šåŠ¨æ¡ */
        .modal-body {
            scrollbar-width: thin;
            scrollbar-color: rgba(128, 128, 128, 0.8) rgba(255, 255, 255, 0.1);
        }

        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 767.98px) {
            body {
                overflow-x: hidden !important;
                background-attachment: scroll !important;
                min-height: 100vh !important;
            }
            
            main.container {
                min-height: auto !important;
                padding: 20px 15px 100px 15px !important;
                transform: none !important;
                display: flex !important;
                align-items: flex-start !important;
                justify-content: center !important;
            }
            
            .row.w-100.text-center {
                flex-direction: column !important;
                transform: none !important;
                max-width: 100% !important;
                margin: 0 !important;
                gap: 20px !important;
            }
            
            .col-md-4, .col-md-5 {
                max-width: 100% !important;
                flex: 0 0 100% !important;
                margin: 0 !important;
                padding: 0 10px !important;
            }
            
            .col-md-4 {
                margin-bottom: 0 !important;
                order: 1 !important;
            }
            
            .col-md-5 {
                order: 2 !important;
            }
            
            /* å¤´åƒå’Œå§“ååŒºåŸŸ */
            .col-md-4 img.rounded-circle {
                width: 100px !important;
                height: 100px !important;
                margin-bottom: 15px !important;
            }
            
            .col-md-4 h5 {
                font-size: 1.5rem !important;
                margin-bottom: 15px !important;
            }
            
            /* å¡ç‰‡æ ·å¼ */
            .card.w-75, .card.w-100 {
                width: 100% !important;
                min-width: 0 !important;
                margin-bottom: 15px !important;
            }
            
            .card-body {
                padding: 15px !important;
            }
            
            /* å¤©æ°”æ—¶é—´æ¨¡å— */
            .col-md-5 .card.w-75 {
                transform: none !important;
                margin-bottom: 20px !important;
            }
            
            .col-md-5 .card-body {
                min-height: 100px !important;
            }
            
            #date {
                font-size: 1.2rem !important;
                margin-bottom: 8px !important;
            }
            
            #time {
                font-size: 2rem !important;
                margin-bottom: 8px !important;
            }
            
            #weather {
                font-size: 1rem !important;
            }
            
            /* æŒ‰é’®åŒºåŸŸ */
            .row.w-85 {
                width: 100% !important;
                margin: 0 !important;
            }
            
            .col-4 {
                padding: 0 5px !important;
            }
            
            .btn {
                height: 50px !important;
                font-size: 14px !important;
                border-radius: 8px !important;
            }
            
            .btn img {
                width: 18px !important;
                height: 18px !important;
                margin-right: 8px !important;
            }
            
            /* ç¤¾äº¤åª’ä½“é“¾æ¥ */
            .d-flex.justify-content-center.align-items-center.mt-3 {
                flex-wrap: wrap !important;
                gap: 12px !important;
                margin-top: 15px !important;
            }
            
            .social-link {
                width: 35px !important;
                height: 35px !important;
            }
            
            .social-link img {
                width: 18px !important;
                height: 18px !important;
            }
            
            /* æ›´æ–°æ—¥å¿— */
            .update-log .update-item {
                padding: 8px 0 !important;
            }
            
            .update-title {
                font-size: 0.75rem !important;
            }
            
            .update-time {
                font-size: 0.65rem !important;
            }
            
            /* åº•éƒ¨ç‰ˆæƒ */
            .footer-fixed {
                position: relative !important;
                padding: 20px 0 10px 0 !important;
                margin-top: 20px !important;
                bottom: auto !important;
            }
            
            .footer-fixed > div {
                font-size: 0.8rem !important;
                padding: 6px 15px !important;
            }
        }
        
        /* è¶…å°å±å¹•ä¼˜åŒ– */
        @media (max-width: 480px) {
            main.container {
                padding: 15px 10px !important;
            }
            
            .col-md-4, .col-md-5 {
                padding: 0 5px !important;
            }
            
            .col-md-4 img.rounded-circle {
                width: 90px !important;
                height: 90px !important;
            }
            
            .col-md-4 h5 {
                font-size: 1.3rem !important;
            }
            
            .card-body {
                padding: 12px !important;
            }
            
            #date {
                font-size: 1.1rem !important;
            }
            
            #time {
                font-size: 1.8rem !important;
            }
            
            .btn {
                height: 45px !important;
                font-size: 13px !important;
            }
            
            .btn img {
                width: 16px !important;
                height: 16px !important;
                margin-right: 6px !important;
            }
            
            .social-link {
                width: 32px !important;
                height: 32px !important;
            }
            
            .social-link img {
                width: 16px !important;
                height: 16px !important;
            }
        }
        
        /* èƒŒæ™¯å›¾ç‰‡å“åº”å¼ä¼˜åŒ– */
        @media (max-width: 767.98px) {
            body {
                background-attachment: scroll !important;
                background-size: cover !important;
                background-position: center center !important;
            }
        }
        
        @media (min-width: 768px) {
            body {
                background-attachment: fixed !important;
                background-size: cover !important;
                background-position: center center !important;
            }
        }
        
        /* ç§»åŠ¨ç«¯ç‰¹æ®Šä¼˜åŒ– */
        @media (max-width: 767.98px) {
            /* ç¡®ä¿å†…å®¹ä¸ä¼šæº¢å‡º */
            .container {
                max-width: 100% !important;
                overflow-x: hidden !important;
            }
            
            /* ä¼˜åŒ–å¡ç‰‡é˜´å½±å’Œè¾¹æ¡† */
            .card {
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2) !important;
                border-radius: 12px !important;
            }
            
            /* ä¼˜åŒ–æŒ‰é’®æ‚¬åœæ•ˆæœ */
            .btn:hover {
                transform: scale(1.02) !important;
            }
            
            /* ä¼˜åŒ–ç¤¾äº¤åª’ä½“é“¾æ¥æ‚¬åœæ•ˆæœ */
            .social-link:hover {
                transform: scale(1.03) !important;
            }
            
            /* ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ– */
            .social-link, .btn, .card {
                will-change: auto !important;
                transform: none !important;
            }
            
            .social-link:hover, .btn:hover {
                transform: scale(1.02) !important;
            }
            
            /* ç¡®ä¿æ¨¡æ€æ¡†åœ¨ç§»åŠ¨ç«¯æ­£å¸¸æ˜¾ç¤º */
            .modal-dialog {
                margin: 10px !important;
            }
        }
    </style>
</head>

<body style="background-image: url('./images/home.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat; background-attachment: fixed; overflow-x: hidden;">
    <!-- ä¸»ä½“å†…å®¹ -->
    <main class="container d-flex align-items-center justify-content-center" style="min-height: 85vh; padding: 20px 0; transform: translate(10px, 20px);">
        <div class="row w-100 text-center" style="transform: translateX(12%); max-width: 1000px;">
            <!-- å·¦ä¾§ä¸ªäººä¿¡æ¯ -->
            <div class="col-md-4 d-flex flex-column align-items-center" style="margin-top: 60px;" id="profile-section">
                <img src="https://cloud-image-host.oss-cn-beijing.aliyuncs.com/wo.jpg" alt="å¤´åƒ"
                    class="rounded-circle shadow mb-3" style="width: 120px; height: 120px; border: 3px solid white;">
                <h5 class="mb-3" style="font-size: 1.8rem; font-weight: bold; font-family: 'Microsoft YaHei', sans-serif; color: white;">@ç‹æ˜ å¯’</h5>
                <div class="card w-75"
                    style="background: rgba(50, 50, 50, 0.8); font-size: 1.2rem; backdrop-filter: blur(10px); color: white; font-family: 'Microsoft YaHei', sans-serif;">
                    <div class="card-body text-center">
                        <p class="card-text">æŠ€æœ¯ï¼Œæ€æƒ³ï¼Œè¡¨è¾¾ã€‚</p>
                    </div>
                </div>
                
                <!-- å¤–éƒ¨é“¾æ¥å›¾æ ‡ -->
                <div class="mt-3 d-flex justify-content-center align-items-center" style="gap: 15px;">
                    <a href="https://github.com/Gatsby933" target="_blank" class="social-link" title="GitHubä¸»é¡µ" style="display: inline-block; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; text-decoration: none;">
                        <img src="./images/github.svg" alt="GitHub" style="width: 20px; height: 20px;">
                    </a>
                    <a href="https://weibo.com/u/7798052809" target="_blank" class="social-link" title="å¾®åšä¸»é¡µ" style="display: inline-block; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; text-decoration: none;">
                        <img src="./images/æ–°æµªå¾®åš.svg" alt="å¾®åš" style="width: 20px; height: 20px;">
                    </a>
                    <a href="https://v.douyin.com/_rSL0zBfxbw/ 9@5.com :8pm" target="_blank" class="social-link" title="æŠ–éŸ³ä¸»é¡µ" style="display: inline-block; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; text-decoration: none;">
                        <img src="./images/æŠ–éŸ³ (1).svg" alt="æŠ–éŸ³" style="width: 20px; height: 20px;">
                    </a>
                    <a href="#" class="social-link" id="emailBtn" title="è”ç³»é‚®ç®±ï¼šnufewyh2023@163.com" style="display: inline-block; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; text-decoration: none;">
                        <img src="./images/é‚®ç®±.svg" alt="é‚®ç®±" style="width: 20px; height: 20px;">
                    </a>
                    <a href="#" class="social-link" id="wechatBtn" title="å¾®ä¿¡å·ï¼šGatsby933" style="display: inline-block; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; text-decoration: none;">
                        <img src="./images/å¾®ä¿¡ (1).svg" alt="å¾®ä¿¡" style="width: 20px; height: 20px;">
                    </a>
                </div>
            </div>

            <!-- å³ä¾§æ¨¡å— -->
            <div class="col-md-5 d-flex flex-column align-items-center" style="margin-left: 50px;">
                <!-- å¤©æ°”æ—¶é—´æ¨¡å— -->
                <div class="card w-75 mb-3"
                    style="background: rgba(50, 50, 50, 0.8); font-size: 1.2rem; backdrop-filter: blur(10px); color: white; font-family: 'Microsoft YaHei', sans-serif; transform: translate(5px, -10px);">
                    <div class="card-body text-center d-flex flex-column justify-content-center align-items-center" style="min-height: 120px;">
                        <p id="date" style="font-size: 1.5rem; margin-bottom: 10px; text-align: center; width: 100%;">2025å¹´7æœˆ27æ—¥</p>
                        <p id="time" style="font-size: 2.5rem; font-weight: bold; margin-bottom: 10px; text-align: center; width: 100%;">åŠ è½½ä¸­...</p>
                        <div class="d-flex align-items-center justify-content-center" style="width: 100%;">
                            <p id="weather" style="font-size: 1.2rem; margin-bottom: 0; text-align: center;">åŒ—äº¬ å¤©æ°”ï¼šæ™´ 25Â°C</p>
                        </div>
                    </div>
                </div>
                <!-- æŒ‰é’® -->
                <div class="row w-85">
                    <div class="col-4 mb-3">
                        <a href="#" class="btn w-100 shadow d-flex align-items-center justify-content-center"
                            style="background: rgba(50, 50, 50, 0.8); height: 60px; font-size: 16px; color: white; font-family: 'Microsoft YaHei', sans-serif;">
                            <img src="./images/åšå®¢å›­.svg" alt="åšå®¢å›¾æ ‡" style="width: 20px; height: 20px; margin-right: 10px;">
                            <span>åšå®¢</span>
                        </a>
                    </div>
                    <div class="col-4 mb-3">
                        <a href="#" class="btn w-100 shadow d-flex align-items-center justify-content-center"
                            style="background: rgba(50, 50, 50, 0.8); height: 60px; font-size: 16px; color: white; font-family: 'Microsoft YaHei', sans-serif;">
                            <img src="./images/éŸ³ä¹.svg" alt="éŸ³ä¹å›¾æ ‡" style="width: 20px; height: 20px; margin-right: 10px;">
                            <span>éŸ³ä¹</span>
                        </a>
                    </div>
                    <div class="col-4 mb-3">
                        <a href="#" class="btn w-100 shadow d-flex align-items-center justify-content-center"
                            style="background: rgba(50, 50, 50, 0.8); height: 60px; font-size: 16px; color: white; font-family: 'Microsoft YaHei', sans-serif;">
                            <img src="./images/æœç´¢ (1).svg" alt="æœç´¢å›¾æ ‡" style="width: 20px; height: 20px; margin-right: 10px;">
                            <span>æœç´¢</span>
                        </a>
                    </div>
                </div>
                
                <!-- æ›´æ–°æ—¥å¿— -->
                <div class="card w-100 mt-3"
                    style="background: rgba(50, 50, 50, 0.8); backdrop-filter: blur(10px); color: white; font-family: 'Microsoft YaHei', sans-serif;">
                    <div class="card-body" style="padding: 12px;">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <h6 class="card-title mb-0" style="font-size: 1rem; font-weight: bold; color: rgba(255, 255, 255, 0.9);">æ›´æ–°æ—¥å¿—</h6>
                        </div>
                        <div class="update-log" id="update-log-short">
                            <!-- åŠ¨æ€æ’å…¥ç®€è¦æ—¥å¿— -->
                        </div>
                        <div class="mt-2">
                            <button id="showAllUpdates" class="btn w-100" style="background: rgba(255, 255, 255, 0.2); color: white; border: none; padding: 6px 12px; font-size: 0.8rem; border-radius: 8px; transition: all 0.3s ease;">
                                æŸ¥çœ‹æ›´å¤š...
                            </button>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </main>

    <!-- æ›´æ–°æ—¥å¿—æ¨¡æ€æ¡† -->
    <div id="updateModal" class="modal fade" tabindex="-1" aria-labelledby="updateModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 500px;">
            <div class="modal-content" style="background: rgba(50, 50, 50, 0.95); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.2); color: white; font-family: 'Microsoft YaHei', sans-serif;">
                <div class="modal-header" style="border-bottom: 1px solid rgba(255, 255, 255, 0.2);">
                    <h5 class="modal-title" id="updateModalLabel" style="font-size: 1.2rem; font-weight: bold;">æ›´æ–°æ—¥å¿—</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" style="max-height: 400px; overflow-y: auto;">
                    <div class="update-log-full" id="update-log-full">
                        <!-- åŠ¨æ€æ’å…¥å®Œæ•´æ—¥å¿— -->
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- åº•éƒ¨ç‰ˆæƒ -->
    <footer class="footer-fixed" style="text-align: center; color: white; font-size: 0.9rem; position: fixed; bottom: 0; left: 0; right: 0; padding: 10px 0;">
        <div style="display: inline-block; background: linear-gradient(135deg, rgba(128, 128, 128, 0.8), rgba(64, 64, 64, 0.8)); padding: 8px 20px; border-radius: 20px; backdrop-filter: blur(5px);">
            &copy; 2025 ç‰ˆæƒæ‰€æœ‰. @ç‹æ˜ å¯’
        </div>
    </footer>

    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function updateTime() {
            const now = new Date();
            const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
            const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit' };
            document.getElementById('date').textContent = now.toLocaleDateString('zh-CN', dateOptions);
            document.getElementById('time').textContent = now.toLocaleTimeString('zh-CN', timeOptions);
        }

        // åŠ¨æ€å¤©æ°”ï¼ˆé«˜å¾·åœ°å›¾API + å¤‡ç”¨æ–¹æ¡ˆï¼‰
        async function updateWeather() {
            const key = '7e4f726be1be9def9aae111e9bb2aa72'; // æœåŠ¡ç«¯API Key
            let city = 'åŒ—äº¬'; // é»˜è®¤åŸå¸‚
            let latitude, longitude;
            
            try {
                // é¦–å…ˆå°è¯•è·å–GPSä½ç½®ï¼ˆç§»åŠ¨ç«¯ä¼˜å…ˆï¼‰
                if (navigator.geolocation) {
                    try {
                        const position = await getCurrentPosition();
                        latitude = position.coords.latitude;
                        longitude = position.coords.longitude;
                        console.log('GPSä½ç½®è·å–æˆåŠŸ:', { latitude, longitude });
                        
                        // ä½¿ç”¨GPSåæ ‡é€šè¿‡é«˜å¾·åœ°å›¾APIè·å–åŸå¸‚ä¿¡æ¯
                        const locationRes = await fetch(`https://restapi.amap.com/v3/geocode/regeo?key=${key}&location=${longitude},${latitude}&output=json`, {
                            method: 'GET',
                            headers: {
                                'Accept': 'application/json',
                            },
                            timeout: 5000
                        });
                        
                        if (locationRes.ok) {
                            const locationData = await locationRes.json();
                            console.log('GPSå®šä½ç»“æœ:', locationData);
                            
                            if (locationData.status === '1' && locationData.regeocode && locationData.regeocode.addressComponent) {
                                const addressComponent = locationData.regeocode.addressComponent;
                                city = addressComponent.city || addressComponent.district || addressComponent.province;
                                city = city.replace(/å¸‚|åŒº|çœ/g, ''); // å»æ‰è¡Œæ”¿åŒºåˆ’åç¼€
                                console.log('GPSå®šä½åŸå¸‚:', city);
                            }
                        }
                    } catch (gpsError) {
                        console.log('GPSå®šä½å¤±è´¥ï¼Œå°è¯•IPå®šä½:', gpsError);
                    }
                }
                
                // å¦‚æœGPSå®šä½å¤±è´¥ï¼Œå°è¯•é€šè¿‡IPè·å–ç”¨æˆ·ä½ç½®
                if (!city || city === 'åŒ—äº¬') {
                    try {
                        const ipRes = await fetch(`https://restapi.amap.com/v3/ip?key=${key}`, {
                            method: 'GET',
                            headers: {
                                'Accept': 'application/json',
                            },
                            timeout: 5000 // 5ç§’è¶…æ—¶
                        });
                        
                        if (ipRes.ok) {
                            const ipData = await ipRes.json();
                            console.log('IPå®šä½ç»“æœ:', ipData);
                            
                            if (ipData.status === '1' && ipData.city && ipData.city !== '[]') {
                                city = ipData.city.replace(/å¸‚/g, ''); // å»æ‰"å¸‚"å­—
                            }
                        }
                    } catch (ipError) {
                        console.log('IPå®šä½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤åŸå¸‚:', ipError);
                    }
                }
                
                // ä½¿ç”¨é«˜å¾·åœ°å›¾å¤©æ°”APIè·å–å®æ—¶å¤©æ°”
                const weatherRes = await fetch(`https://restapi.amap.com/v3/weather/weatherInfo?key=${key}&city=${city}&extensions=base`, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json',
                    },
                    timeout: 5000 // 5ç§’è¶…æ—¶
                });
                
                if (weatherRes.ok) {
                    const weatherData = await weatherRes.json();
                    console.log('å¤©æ°”æŸ¥è¯¢ç»“æœ:', weatherData);
                    
                    if (weatherData.status === '1' && weatherData.lives && weatherData.lives.length > 0) {
                        const weather = weatherData.lives[0];
                        const weatherText = weather.weather;
                        const temperature = weather.temperature;
                        document.getElementById('weather').textContent = `${city} ${weatherText} ${temperature}Â°C`;
                        return; // æˆåŠŸè·å–ï¼Œç›´æ¥è¿”å›
                    }
                }
                
                // å¦‚æœé«˜å¾·APIå¤±è´¥ï¼Œå°è¯•å¤‡ç”¨å¤©æ°”API
                throw new Error('é«˜å¾·å¤©æ°”APIå¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æ–¹æ¡ˆ');
                
            } catch (error) {
                console.error('é«˜å¾·å¤©æ°”APIå¤±è´¥:', error);
                
                // å¤‡ç”¨æ–¹æ¡ˆï¼šä½¿ç”¨wttr.in API
                try {
                    const fallbackRes = await fetch(`https://wttr.in/${city}?format=j1`, {
                        method: 'GET',
                        timeout: 5000
                    });
                    
                    if (fallbackRes.ok) {
                        const fallbackData = await fallbackRes.json();
                        console.log('å¤‡ç”¨å¤©æ°”APIç»“æœ:', fallbackData);
                        
                        if (fallbackData.current_condition && fallbackData.current_condition.length > 0) {
                            const current = fallbackData.current_condition[0];
                            const weatherText = current.lang_zh ? current.lang_zh[0].value : current.weatherDesc[0].value;
                            const temperature = current.temp_C;
                            document.getElementById('weather').textContent = `${city} ${weatherText} ${temperature}Â°C`;
                            return;
                        }
                    }
                } catch (fallbackError) {
                    console.error('å¤‡ç”¨å¤©æ°”APIä¹Ÿå¤±è´¥:', fallbackError);
                }
                
                // æ‰€æœ‰æ–¹æ¡ˆéƒ½å¤±è´¥ï¼Œæ˜¾ç¤ºé»˜è®¤ä¿¡æ¯
                document.getElementById('weather').textContent = `${city} å¤©æ°”ä¿¡æ¯æš‚æ—¶æ— æ³•è·å–`;
            }
        }

        // æ›´æ–°æ—¥å¿—åŠ¨æ€æ¸²æŸ“
        function renderUpdateLog() {
            fetch('./update-log.json')
                .then(res => {
                    if (!res.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return res.json();
                })
                .then(list => {
                    // ä½¿ç”¨ DocumentFragment ä¼˜åŒ–DOMæ“ä½œ
                    const shortFragment = document.createDocumentFragment();
                    const fullFragment = document.createDocumentFragment();
                    
                    // ç®€è¦æ—¥å¿—ï¼ˆåªæ˜¾ç¤ºå‰2æ¡ï¼‰
                    list.slice(0,2).forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'update-item mb-1';
                        div.style.cssText = 'border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 4px;';
                        div.innerHTML = `
                            <div class="d-flex justify-content-between align-items-start">
                                <span class="update-title" style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">${item.title}</span>
                                <span class="update-time" style="font-size: 0.7rem; color: rgba(255,255,255,0.5);">${item.date}</span>
                            </div>
                        `;
                        shortFragment.appendChild(div);
                    });
                    
                    // å®Œæ•´æ—¥å¿—
                    list.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'update-item-full mb-3';
                        div.style.cssText = 'border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 12px;';
                        div.innerHTML = `
                            <div class="d-flex justify-content-between align-items-start mb-1">
                                <span class="update-title-full" style="font-size: 1rem; font-weight: bold; color: rgba(255,255,255,0.9);">${item.title}</span>
                                <span class="update-time-full" style="font-size: 0.85rem; color: rgba(255,255,255,0.6);">${item.date}</span>
                            </div>
                            <p class="update-desc" style="font-size: 0.9rem; color: rgba(255,255,255,0.7); margin: 0;">${item.desc}</p>
                        `;
                        fullFragment.appendChild(div);
                    });
                    
                    // ä¸€æ¬¡æ€§æ›´æ–°DOM
                    const shortContainer = document.getElementById('update-log-short');
                    const fullContainer = document.getElementById('update-log-full');
                    
                    shortContainer.innerHTML = '';
                    fullContainer.innerHTML = '';
                    
                    shortContainer.appendChild(shortFragment);
                    fullContainer.appendChild(fullFragment);
                })
                .catch(error => {
                    console.error('åŠ è½½æ›´æ–°æ—¥å¿—å¤±è´¥:', error);
                    document.getElementById('update-log-short').innerHTML = '<div style="color: rgba(255,255,255,0.6); font-size: 0.8rem;">æ— æ³•åŠ è½½æ›´æ–°æ—¥å¿—</div>';
                    document.getElementById('update-log-full').innerHTML = '<div style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">æ— æ³•åŠ è½½æ›´æ–°æ—¥å¿—</div>';
                });
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ä½¿ç”¨ requestAnimationFrame ä¼˜åŒ–æ—¶é—´æ›´æ–°
            function updateTimeWithRAF() {
                updateTime();
                requestAnimationFrame(updateTimeWithRAF);
            }
            
            // å¯åŠ¨æ—¶é—´æ›´æ–°ï¼ˆæ¯ç§’æ›´æ–°ä¸€æ¬¡ï¼‰
            let lastUpdate = 0;
            function animateTime(currentTime) {
                if (currentTime - lastUpdate >= 1000) {
                    updateTime();
                    lastUpdate = currentTime;
                }
                requestAnimationFrame(animateTime);
            }
            requestAnimationFrame(animateTime);
            
            // åˆå§‹åŒ–å…¶ä»–åŠŸèƒ½
            updateTime();
            
            // æ£€æŸ¥ä½ç½®æƒé™å¹¶è·å–å¤©æ°”
            checkLocationPermission();
            
            renderUpdateLog();
            
            // æ›´æ–°æ—¥å¿—æ¨¡æ€æ¡†åŠŸèƒ½
            document.getElementById('showAllUpdates').addEventListener('click', function() {
                // é¢„åŠ è½½æ¨¡æ€æ¡†å†…å®¹ï¼Œé¿å…æ‰“å¼€æ—¶å¡é¡¿
                const modalElement = document.getElementById('updateModal');
                if (!modalElement.classList.contains('modal-loaded')) {
                    modalElement.classList.add('modal-loaded');
                }
                const modal = new bootstrap.Modal(modalElement);
                modal.show();
            });
            
            // é‚®ç®±æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('emailBtn').addEventListener('click', function(e) {
                e.preventDefault();
                copyToClipboard('nufewyh2023@163.com');
                showContactInfo('é‚®ç®±ï¼šnufewyh2023@163.com');
            });
            
            // å¾®ä¿¡æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('wechatBtn').addEventListener('click', function(e) {
                e.preventDefault();
                copyToClipboard('Gatsby933');
                showContactInfo('å¾®ä¿¡ï¼šGatsby933');
            });
        });
        
        // å¤åˆ¶åˆ°å‰ªè´´æ¿åŠŸèƒ½
        function copyToClipboard(text) {
            if (navigator.clipboard && window.isSecureContext) {
                // ä½¿ç”¨ç°ä»£ Clipboard API
                navigator.clipboard.writeText(text).then(function() {
                    showCopySuccess();
                }).catch(function(err) {
                    console.error('å¤åˆ¶å¤±è´¥:', err);
                    fallbackCopyTextToClipboard(text);
                });
            } else {
                // é™çº§æ–¹æ¡ˆ
                fallbackCopyTextToClipboard(text);
            }
        }
        
        // é™çº§å¤åˆ¶æ–¹æ¡ˆ
        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.top = "0";
            textArea.style.left = "0";
            textArea.style.position = "fixed";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopySuccess();
                } else {
                    alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ï¼š' + text);
                }
            } catch (err) {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ï¼š' + text);
            }
            
            document.body.removeChild(textArea);
        }
        
        // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
        function showCopySuccess() {
            // åˆ›å»ºä¸´æ—¶æç¤ºå…ƒç´ 
            const toast = document.createElement('div');
            toast.style.cssText = 'position: fixed; top: 20px; right: 20px; background: rgba(76, 175, 80, 0.9); color: white; padding: 12px 20px; border-radius: 8px; font-size: 14px; z-index: 9999;';
            toast.textContent = 'å¤åˆ¶æˆåŠŸï¼';
            document.body.appendChild(toast);
            
            // 3ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                if (document.body.contains(toast)) {
                    document.body.removeChild(toast);
                }
            }, 2000);
        }
        
        // æ£€æŸ¥ä½ç½®æƒé™å¹¶è·å–å¤©æ°”
        async function checkLocationPermission() {
            // æ£€æŸ¥æ˜¯å¦æ”¯æŒåœ°ç†å®šä½
            if (!navigator.geolocation) {
                console.log('æµè§ˆå™¨ä¸æ”¯æŒåœ°ç†å®šä½ï¼Œä½¿ç”¨IPå®šä½');
                updateWeather();
                return;
            }
            
            // æ£€æŸ¥æƒé™çŠ¶æ€ï¼ˆå¦‚æœæ”¯æŒï¼‰
            if (navigator.permissions && navigator.permissions.query) {
                try {
                    const permission = await navigator.permissions.query({ name: 'geolocation' });
                    
                    if (permission.state === 'granted') {
                        // å·²æˆæƒï¼Œç›´æ¥è·å–ä½ç½®
                        console.log('ä½ç½®æƒé™å·²æˆæƒ');
                        updateWeather();
                    } else if (permission.state === 'prompt') {
                        // éœ€è¦è¯·æ±‚æƒé™
                        console.log('éœ€è¦è¯·æ±‚ä½ç½®æƒé™');
                        showLocationPermissionPrompt();
                    } else if (permission.state === 'denied') {
                        // æƒé™è¢«æ‹’ç»
                        console.log('ä½ç½®æƒé™è¢«æ‹’ç»ï¼Œä½¿ç”¨IPå®šä½');
                        updateWeather();
                    }
                } catch (error) {
                    console.log('æƒé™æ£€æŸ¥å¤±è´¥ï¼Œå°è¯•ç›´æ¥è·å–ä½ç½®:', error);
                    updateWeather();
                }
            } else {
                // ä¸æ”¯æŒæƒé™APIï¼Œç›´æ¥å°è¯•è·å–ä½ç½®
                console.log('ä¸æ”¯æŒæƒé™APIï¼Œç›´æ¥å°è¯•è·å–ä½ç½®');
                updateWeather();
            }
        }
        
        // æ˜¾ç¤ºä½ç½®æƒé™è¯·æ±‚æç¤º
        function showLocationPermissionPrompt() {
            const promptDiv = document.createElement('div');
            promptDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(50, 50, 50, 0.95);
                color: white;
                padding: 20px;
                border-radius: 12px;
                font-size: 14px;
                z-index: 10000;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                font-family: "Microsoft YaHei", sans-serif;
                text-align: center;
                max-width: 280px;
                min-width: 250px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            `;
            promptDiv.innerHTML = `
                <div style="margin-bottom: 18px;">
                    <h4 style="margin-bottom: 12px; font-size: 16px; font-weight: 600;">ğŸ“ è·å–ä½ç½®ä¿¡æ¯</h4>
                    <p style="margin-bottom: 18px; line-height: 1.4; font-size: 13px; color: rgba(255, 255, 255, 0.9);">ä¸ºäº†ä¸ºæ‚¨æä¾›å‡†ç¡®çš„å¤©æ°”ä¿¡æ¯ï¼Œéœ€è¦è·å–æ‚¨çš„ä½ç½®æƒé™ã€‚</p>
                </div>
                <div style="display: flex; gap: 8px; justify-content: center;">
                    <button id="allowLocation" style="background: rgba(76, 175, 80, 0.8); color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 500; min-width: 60px; white-space: nowrap;">å…è®¸</button>
                    <button id="denyLocation" style="background: rgba(158, 158, 158, 0.8); color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 500; min-width: 60px; white-space: nowrap;">æ‹’ç»</button>
                </div>
            `;
            document.body.appendChild(promptDiv);
            
            // ç»‘å®šæŒ‰é’®äº‹ä»¶
            document.getElementById('allowLocation').addEventListener('click', function() {
                document.body.removeChild(promptDiv);
                updateWeather();
            });
            
            document.getElementById('denyLocation').addEventListener('click', function() {
                document.body.removeChild(promptDiv);
                updateWeather();
            });
        }
        
        // GPSå®šä½PromiseåŒ…è£…
        function getCurrentPosition() {
            return new Promise((resolve, reject) => {
                if (!navigator.geolocation) {
                    reject(new Error('æµè§ˆå™¨ä¸æ”¯æŒåœ°ç†å®šä½'));
                    return;
                }
                
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        resolve(position);
                    },
                    (error) => {
                        let errorMessage = 'è·å–ä½ç½®å¤±è´¥';
                        switch (error.code) {
                            case error.PERMISSION_DENIED:
                                errorMessage = 'ç”¨æˆ·æ‹’ç»äº†ä½ç½®è¯·æ±‚';
                                break;
                            case error.POSITION_UNAVAILABLE:
                                errorMessage = 'ä½ç½®ä¿¡æ¯ä¸å¯ç”¨';
                                break;
                            case error.TIMEOUT:
                                errorMessage = 'è·å–ä½ç½®è¶…æ—¶';
                                break;
                            default:
                                errorMessage = 'æœªçŸ¥é”™è¯¯';
                                break;
                        }
                        reject(new Error(errorMessage));
                    },
                    {
                        enableHighAccuracy: true, // é«˜ç²¾åº¦
                        timeout: 10000, // 10ç§’è¶…æ—¶
                        maximumAge: 60000 // ç¼“å­˜1åˆ†é’Ÿ
                    }
                );
            });
        }
        
        // æ˜¾ç¤ºè”ç³»ä¿¡æ¯
        function showContactInfo(text) {
            // åˆ›å»ºè”ç³»ä¿¡æ¯æç¤ºå…ƒç´ 
            const contactToast = document.createElement('div');
            contactToast.style.cssText = 'position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(50, 50, 50, 0.95); color: white; padding: 15px 25px; border-radius: 10px; font-size: 16px; z-index: 9999; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); font-family: "Microsoft YaHei", sans-serif;';
            contactToast.textContent = text;
            document.body.appendChild(contactToast);
            
            // 2ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                if (document.body.contains(contactToast)) {
                    contactToast.style.opacity = '0';
                    contactToast.style.transform = 'translateX(-50%) translateY(-20px)';
                    contactToast.style.transition = 'all 0.3s ease';
                    setTimeout(() => {
                        if (document.body.contains(contactToast)) {
                            document.body.removeChild(contactToast);
                        }
                    }, 300);
                }
            }, 2000);
        }
    </script>
</body>

</html>